@page "/empleados"
@using MudBlazor

@inject IEmployeeSdk EmployeeSdk

<PageTitle>Gestión de Empleados</PageTitle>

<MudDrawer @bind-Open="isDrawerOpen" Anchor="Anchor.Left" Elevation="10">    
        <MudText Typo="Typo.h6" Align="Align.Center" Class="pa-4">Usuario Logueado: @userName</MudText>
        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="ShowEmployeeManagement" Class="pa-2">Employee Management</MudButton>    
</MudDrawer>

<MudButton Variant="Variant.Filled" Color="Color.Secondary" OnClick="ToggleDrawer" StartIcon="@Icons.Material.Filled.Menu">Abrir Menú</MudButton>

<MudTextField @bind-Value="searchTerm" Label="Buscar Empleado" FullWidth="true" Class="mt-4" />
<MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="SearchEmployee" Class="mt-2">Buscar</MudButton>

<MudPaper Class="pa-4 mt-4">
    <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="OpenAddDialog" Class="mb-4">Agregar Nuevo Empleado</MudButton>
    <MudTable Items="filteredEmployees" Dense="true" Hover="true">
        <HeaderContent>
            <MudTh>Nombre</MudTh>
            <MudTh>Apellido</MudTh>
            <MudTh>DUI</MudTh>
            <MudTh>Acciones</MudTh>
        </HeaderContent>
        <RowTemplate>
            <MudTd>@context.FirstName</MudTd>
            <MudTd>@context.LastName</MudTd>
            <MudTd>@context.DUI</MudTd>
            <MudTd>
                <MudButton Variant="Variant.Filled" Color="Color.Info" OnClick="() => EditEmployee(context)" Class="mr-2">Editar</MudButton>
                <MudButton Variant="Variant.Filled" Color="Color.Error" OnClick="() => DeleteEmployee(context)" Class="mr-2">Eliminar</MudButton>
            </MudTd>
        </RowTemplate>
    </MudTable>
</MudPaper>

<MudDialog @bind-IsOpen="isDialogOpen">
    <DialogContent>
        <MudTextField Label="Nombre" @bind-Value="currentEmployee.FirstName" Required="true" />
        <MudTextField Label="Apellido" @bind-Value="currentEmployee.LastName" Required="true" />
        <MudTextField Label="DUI" @bind-Value="currentEmployee.DUI" Required="true" />
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="CloseDialog">Cancelar</MudButton>
        <MudButton OnClick="SaveEmployee" Color="Color.Primary">Guardar</MudButton>
    </DialogActions>
</MudDialog>

@code {  
    
      
}

